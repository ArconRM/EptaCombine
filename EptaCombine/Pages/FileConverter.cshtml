@page
@model EptaCombine.Pages.FileConverterModel
@{
    ViewData["Title"] = "–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤";
}
@Html.AntiForgeryToken()

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="css/fileConverter.css?v=@DateTime.Now.Ticks"/>

<div>
    <h2 class="text-center mb-4 fw-bold">üõ† –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤</h2>

    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ -->
    <div id="upload-section" class="card shadow-sm mb-4 p-4 hover-zoom">
        <label for="uploadFile" class="form-label fw-semibold">1Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª:</label>
        <input type="file" class="form-control" id="uploadFile" name="uploadFile"/>
    </div>

    <!-- –í—ã–±–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞ -->
    <div id="format-section" class="card shadow-sm mb-4 p-4 d-none hover-zoom">
        <p>üìÅ –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ñ–∞–π–ª–∞: <strong id="categoryLabel"></strong></p>
        <label for="formatSelect" class="form-label fw-semibold">2Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ –≤—ã—Ö–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç:</label>
        <select id="formatSelect" class="form-select mb-3"></select>
        <button id="convertBtn" class="btn btn-outline-primary w-100 fw-bold transition-hover">üöÄ –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ø–µ—Ü–æ–ø–µ—Ä–∞—Ü–∏—é
        </button>
    </div>

    <!-- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ -->
    <div id="result-section" class="card text-center p-4 d-none fade-in border-success border-2">
        <p class="mb-3 text-success fw-semibold">‚úÖ –û–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</p>
        <a id="downloadLink" href="#" download class="btn btn-success w-50 mx-auto shadow">–°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª</a>
    </div>
    
    <!-- Toast -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
        <div id="toastBox" class="toast align-items-center text-white bg-success border-0" role="alert">
            <div class="d-flex">
                <div class="toast-body">‚úÖ –•–∑ –∑–∞—á–µ–º –æ–Ω–∞ —â–∞—Å –ø–æ—è–≤–∏–ª–∞—Å—å</div>
            </div>
        </div>
    </div>
</div>

<div id="overlay" class="position-fixed top-0 start-0 w-100 h-100 d-none"
     style="z-index: 1050; background-color: rgba(0, 0, 0, 0.5);">
    <!-- Video Background -->
    <video
        id="overlay-video"
        class="overlay-video"
        autoplay
        muted
        playsinline
        loop
    >
        <source src="/media/bobek.mp4" type="video/mp4">
    </video>

    <!-- Spinner & Message -->
    <div class="d-flex justify-content-center align-items-center h-100 position-relative">
        <div class="text-white text-center">
            <div class="spinner-border text-light mb-3" role="status"></div>
            <div id="overlayMessage" class="fs-5 fw-semibold"></div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/fileConverter.js?v=@DateTime.Now.Ticks"></script>
}